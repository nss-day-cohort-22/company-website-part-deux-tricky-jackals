function popup(n,t,i){result=window.open(n,"popped1","width="+t+", height="+i+", location=no, menubar=no, status=no, toolbar=no, scrollbars=yes, resizable=no"),result!=null?html="is not blocking":alert("Your Browser is blocking popups which is preventing a 3dCart window to appear.")}function popupsimple(n,t,i){var r=480,u=340,f,e;(document.all||document.layers)&&(r=screen.availWidth,u=screen.availHeight),f=(r-t)/2,e=(u-i)/2,result=window.open(n,"popped1","width="+t+", height="+i+",top="+e+",left="+f+",location=no, menubar=no, status=no, toolbar=no, scrollbars=no, resizable=no"),result!=null?html="is not blocking":alert("Your Browser is blocking popups which is preventing a 3dCart window to appear.")}function SearchAndReplace(n,t,i){var r=n,e=new String,s=new String,u=new String,f=0,o=0;if(t.length!=0){while(r.toUpperCase().indexOf(t.toUpperCase())>-1)f=r.toUpperCase().indexOf(t.toUpperCase()),e=r.substring(0,f),u=u+e,u=u+i,o=r.length-t.length+1,r=r.substring(f+t.length);return u+r}}function Len(n){return String(n).length}function Left(n,t){return t<=0?"":t>String(n).length?n:String(n).substring(0,t)}function Right(n,t){if(t<=0)return"";if(t>String(n).length)return n;var i=String(n).length;return String(n).substring(i,i-t)}function Mid(n,t,i){if(t<0||i<0)return"";var r,u=String(n).length;return r=t+i>u?u:t+i,String(n).substring(t,r)}function InStr(n,t){for(i=0;i<Len(n);i++)if(t==Mid(n,i,1))return i;return-1}function validateValues(n,t,i){var a=!0,u=new String,v=new String,y=!1,d=!1,f=0,p=!1,w=!1,g=new Image,e,l,h=!1,b=0,o=0,c="",s,r,k,tt;if(stocknum="",n.std_price!=null){if(f=n.std_price.value,s=document.add.reward_product!=undefined&&document.add.reward_product.value>0,s&&(b=eval(document.add.reward_product.value),c=document.add.reward_text.value),f==0&&i!=null&&i!=undefined)return;for(e=n.itemid!=null?n.itemid.value:"",listing_elemLenght=n.elements.length,r=0,k=listing_elemLenght;r<k;r++){myType=n.elements[r].type;try{l=n.elements[r].getAttribute("customoption")}catch(nt){l=null}myType!=null&&myType!=undefined&&l==null&&(u=n.elements[r].name,u!=""&&u!="recipientselect"&&u!="reminder"&&u!="qty-0"&&u!="recurring_frequency"&&u!="item_id"&&(u.indexOf("di_")>-1&&SetSrc(n,"img_"+u,GetValue(n,"image_"+n.elements[r].options[n.elements[r].selectedIndex].value,i),i),myType=="radio"&&(p=!0,n.elements[r].checked&&(w=!0,f=eval(f)+eval(GetValue(n,"price_"+n.elements[r].value,i)),e=e+GetValue(n,"OptID_"+n.elements[r].value,i),stocknum=stocknum+n.elements[r].value+"#",!h&&s&&eval(GetValue(n,"reward_"+n.elements[r].value))!=undefined&&(o=o+eval(GetValue(n,"reward_"+n.elements[r].value)))),recalculateRewardPoints(f)),myType=="checkbox"&&(y=!0,n.elements[r].checked&&(u>""&&(f=eval(f)+eval(GetValue(n,"price_"+u,i))),e=e+GetValue(n,"OptID_"+u,i)),recalculateRewardPoints(f)),(myType=="hidden"||myType=="password"||myType=="text"||myType=="textarea")&&n.elements[r].value==n.elements[r].defaultValue&&(a=!1),(myType=="select-one"||myType=="select-multiple")&&(n.elements[r].name.indexOf("otf_")<0&&n.elements[r].options[n.elements[r].selectedIndex].value>""&&(v=n.elements[r].options[n.elements[r].selectedIndex].value,stocknum=stocknum+v+"#",f=eval(f)+eval(GetValue(n,"price_"+n.elements[r].options[n.elements[r].selectedIndex].value)),e=e+""+GetValue(n,"OptID_"+n.elements[r].options[n.elements[r].selectedIndex].value),!h&&s&&eval(GetValue(n,"reward_"+n.elements[r].value))!=undefined&&(o=o+eval(GetValue(n,"reward_"+n.elements[r].value)))),recalculateRewardPoints(f))))}if(s&&(h||(c=c.replace("[reward_redeem]",b+o),document.getElementById("btnRedeemText").innerHTML=c,h=!0)),(y&&!d||p&&!w)&&(a=!1),changeprice(f,i),changeid(e),t==1)return check_stock(n,stocknum)}}function recalculateRewardPoints(n){var i,r,u,t;document.getElementById("customPoints")!=null&&(i=parseInt(document.getElementById("customPoints").value),i==0&&document.getElementById("pointsMultiplier").value!=null&&(r=parseInt(document.getElementById("pointsMultiplier").value),u=Math.round(r*n),document.getElementById("productRewardDesc").value!=null&&(t=document.getElementById("productRewardDesc").value,t=t.replace("[rewardsPointsValue]",u),document.getElementById("divRewardPoint").innerHTML!=null&&(document.getElementById("divRewardPoint").innerHTML=t))))}function changeid(n){var t=n;changecontent("product_id",t)}function changegtin(n){var t=n;changecontent("product_gtin",t)}function GetValue(n,t,i){var r,u;if(r=i!=undefined&&i!=null?jQuery("#add"+i+" input[name='"+t+"']"):document.getElementsByName(t),r!=null&&r!=undefined&&r.length>0)return i!=undefined&&i!=null?r[0].value:r.item(0).value;for(u=0;u<listing_elemLenght;u++)if(n.elements[u].name==t)return n.elements[u].value}function SetSrc(n,t,r,u){var f,e;if(f=u!=undefined&&u!=null?jQuery("#add"+u+" input[name='"+t+"']"):document.getElementsByName(t),f!=null&&f!=undefined&&f.length>0){f.length>0&&(f.item(0).src=r);return}for(e=u!=undefined&&u!=null?jQuery("#add"+u+" img"):document.getElementsByTagName("img"),listing_imgslength==-1&&(listing_imgslength=e.length),i=0;i<listing_imgslength;i++)e[i].name==t&&(e[i].src=r)}function recalculate(){}function changecontent(n,t){var i=t;document.getElementById?document.getElementById(n)!=null&&(document.getElementById(n).innerHTML=i,document.getElementById(n).style.visibility="visible"):document.all?document.all[fiendname]!=null&&(document.all[fiendname].innerHTML=i,document.all[n].style.visibility="visible"):document.layers&&document.layers[n]!=null&&(document.layers[n].document.open(),document.layers[n].document.write(i),document.layers[n].document.close(),document.layers[n].visibility="show")}function changeprice(n,t){var i=formatCurrency(n),r,u,o;try{currency_symbol!=null&&currency_symbol!=undefined&&(r=currency_symbol)}catch(h){r="$"}if(u=0,document.getElementById("std_price_novat")!=null){var f=parseFloat(document.getElementById("std_price_novat").value),e=parseFloat(document.getElementById("vat_tax_rate").value),s=document.getElementById("vat_tax_price_format").value,o=n;e>=0&&(o=f+f*(e/100),i=s,i=i.replace("[price_vat]",formatCurrency(n)),currency_symbol="",u=n-o,u=u/(1+e/100),f=f+u,currency_symbol=r,i=i.replace("[price_novat]",formatCurrency(f)),i=i.replace("[currency]"+r,r),i=i.replace("[currency]",r))}t!=undefined&&t!=null?changecontent("price"+t,i):changecontent("price",i)}function formatCurrency(n){var i,t;try{i=currency_symbol}catch(r){i="$"}try{t=parseInt(prod_decimal_places)}catch(r){t=2}return n=parseFloat(n),n=n.toString(),t>2&&(t-(n.length-(n.indexOf(".")+1))>0&&(t=n.length-(n.indexOf(".")+1)),t<2&&(t=2)),t>0?formatNumberListing(n,t,",",".",i,"","",""):formatNumberListing(n,t,"","",i,"","","")}function formatNumberListing(n,t,i,r,u,f,e,o){var l=Math.round(n*Math.pow(10,t)),h,s,c,a;for(l>=0&&(e=o=""),h=(""+Math.abs(l)).split(""),s=h.length-t,s<0&&s--,c=s;c<0;c++)h.unshift("0");for(s<0&&(s=1),h.splice(s,0,r),h[0]==r&&h.unshift("0");s>3;)s-=3,h.splice(s,0,i);return a=u+e+h.join("")+o+f}var stocknum="",listing_elemLenght=-1,listing_imgslength=-1